services:
  - type: web
    name: census-income-api
    runtime: docker
    plan: free
    dockerfilePath: ./Dockerfile
    dockerContext: .
    dockerCommand: ./start.sh

    # Environment variables
    envVars:
      - key: PYTHONPATH
        value: /app
      - key: PYTHONUNBUFFERED
        value: 1
      - key: PORT
        sync: false  # Render will set this automatically

    # Health check endpoint
    healthCheckPath: /api/health

    # Auto-deploy on push to main branch
    autoDeploy: true

